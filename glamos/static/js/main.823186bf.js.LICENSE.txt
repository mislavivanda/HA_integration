//!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!

//!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!

//!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!

//!!!!MANA OVE METODE!!!!!

//!AKO GOVORIMO O VEC SPREMLJENOM FLOORPLANU S KOORDINATAMA ONDA ZA TOP LEFT UZIMAMO SVG KOORDINATE ZADNJE SPREMLJENE GORNJE LIJEVE TOCKE FLOORPLANA JER SE NA NJU ODNOSE SPREMLJENE GPS KOORDINATE -> ZANIMAJU NAS NJIHOVE KOORDINATE U PIKSELIMA

//!BEARING NE TREBA POSTAVLJAT JER OSTAJE I DALJE NA MAPI NAKON resize ALI GA TREBA UKLJUCIT KOD IZRACUNA BBOX KOORDINATA(UKLJUCEN KROZ POZIV calculateMapCornersCoordinatesFromTopLeftPoint METODE)

//!BUDUCI DA JE SVE VEC UCITANO PRI POCETNOM UCITAVANJU NEMA ASINKRONIH LOADER POZIVA PA NAKON OVE METODE ZNAMO DA JE FLOORPLAN ISCRTAN

//!ISCRTAJ IH NAKON STO SU ZIDOVI ISCRTANI

//!JSON.stringify MICE DOM elemente ako postoje u propertiesima(NPR graph PROPERTY OD OBJ2D KLASE)

//!KAD SE POSTAVLJA bearing OD MAPE ONDA SE MAPA ROTIRA OKO SVOG CENTRA

//!KONFIGURACIJSKE VARIJABLE IZ HOME ASSISTANTA ĆE BITI PROSLIJEDENE UNUTAR _env_ PROPERTIA OD window OBJEKTA

//!KOORDINATE RELATIVNE U ODNOSU NA GORNJI LIJEVI KUT MAPE -> GORNJA LIJEVA TOCKA IMA (0,0) KOORDINATE

//!KOORDINATE TREBAJU BITI RELATIVNE U ODNOSU NA POCETAK MAPE -> GORNJI LIJEVI VRH MAPE JE [0,0]

//!MI ZELIMO KOD POSTAVLJANJA BEARINGA MAPE RADIT ROTACIJU OKO GORNJE LIJEVE TOCKE TLOCRTA PA ZATO PRIJE BEARINGA POSTAVLJAMO CENTAR NA TU TOCKU

//!NAKON BRISANJA CLANOVA IZ polygons NIZA MIJENJA SE INDEKSACIJA U polygons NIZU -> POTREBNO AZURIRAT INDEKSE U inside NIZU

//!NAKON STA SMO DOVELI FLOORPLAN U TOP-LEFT TOCKU TREBAMO GA ROTIRAT ZA bearing KAO I KOD <ShowFloorplanOnMap/> A TO RADIMO TAKO DA SCENU ROTIRAMO OKO NJENOG RELATIVNOG ISHODISTA (0,0,0) KOJE PREDSTAVLJA modelOrigin ODNOSNO TOP LEFT TOCKA NA MAPI

//!NAPOMENA: TRENUTNO SE TAJ DIO RADI NA NACIN DA SE TRANSLATIRA I ROTIRA CIJELI OBJEKT SCENE

//!NAS OVDE ZANIMAJU NAS SAMO ONI ORPHAN ZIDOVI KOJIMA SAMO 1 KRAJ "VISI" U ZRAKU

//!NE MICEMO NIJEDAN CVOR ZIDA, OSTAVLJAMO IH SVE

//!NE MOZE RADIT SAVE AS IZ PRAZNOG FLOORPLANA

//!NE RADIMO JER NISMO UNUTAR GLAMOS APLIKACIJE

//!NE RADIMO ZA OVAJ SLUCAJ JER NISMO UNUTAR GLAMOS APLIKACIJE

//!NECE NIKAD BIT SITUACIJA SA removePadding=true I logoLabel=true JER KOD EXPORTANJA BEZ PADDINGA NEMA MJESTA ZA STAVLJANJE LOGA

//!NEOVISNO O TOME IMA LI KAT ODABRANU HM OPCIJU -> MOZE KASNIJE BIT ISCRTAN KAD SE ODABERE

//!NIJE SE MOGUCE SPOJIT NA SOCKET -> ISPISI OBAVIJEST

//!NPR floorplanCenterVector CE SE I DALJE NALAZIT U SREDISTU TLOCRTA I NAKON ROTACIJE I TRANSLACIJE ALI CE IMAT DRUKCIJE world KOORDINATE NEGO NA POCETKU

//!OBJEKT SCENE JE RELATIVNA U ODNOSU NA world ISHODISTE I U POCETKU JE (0,0,0) KOORDINATA SCENE ISTA KAO I WORLD ISHODISTE ODNOSNO modelOrigin KOJE JE POSTAVLJENO SA modelOrigin NA KOORINDATE GORNJE LIJEVE TOCKE TLOCRTA

//!ODAVDE UZET GPS LOKACIJU FLOORPLANA + PRATIT PROMJENU COMPONENTSA

//!POGLEDAJ GORE OPIS!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!

//!POHRANJUJE SE UVIJEK U m2

//!POKRIVAMO MOGUCNOST DA JE FLOORPLAN OD HM IZBRISAN -> TADA HM POSTOJI KAKVA JE NEOVISNO O NJEMU ALI NE SMIJEMO PRIKAZIVAT MOGUCNOSTI MANIPULACIJE S KOORDINATAMA FLOORPLANA -> RJESAVA SE UNUTAR <ShowFloorplanOnMap/> KOMPONENTE

//!POSTAVI DA GPS KOORDINATE NE POSTOJE JER NEMA TLOCRTA -> GENERAL PRAZAN

//!POSTAVI NOVE VRIJEDNOSTI KOORDINATA AKO SU PROMIJENJENE

//!POSTAVLJANJE LISTENERA PRIJE setZoom POZIVA

//!POTREBNO JE RADIT DUPLICIRANU OBRADU (i, v) I (v, i) ZIDOVA -> IAKO SE DOBIJU ISTE TOCKE BITNO JE KASNIJE ZA KREIRANJE SOBA -> U SUPROTNOM SE NECE NIJEDNA SOBA KREIRAT

//!POZIVA SE SAMO AKO IMA POSTOJI OBJEKT -> INACE NE

//!PROBLEM S POZICIONIRANJEM HELPERA NAKON TRANSLACIJE I ROTACIJE SCENE

//!PROBLEM: HELPERI ZA SVIJETLA I KAMERU SE NE POZICIONIRAJU DOBRO NAKON TRANSLACIJE I ROTACIJE SCENE(KAD SE ISCRTAJU POZICIJE OD SVJETALA ONE BUDU NA PRAVOM MJESTU + ISTO JE OSVIJETLJENJE KAO NA NORMALNOM PRIKAZU BEZ MAPE STA DAJE POTVRDU DA SU SVIJETLA DOBRO TRANSLATIRANA I ROTIRANA ZAJEDNO SA SCENOM), CINI SE KO DA SE POZICIONIRAJU U ODNOSU NA world ISHODISTE(KOJE JE ISTO KAO OD SCENE U POCETKU PA SU STOGA U POCETKU DOBRO POSTAVLJENI) IAKO SU DODANI SA scene.add() PA BI TREBALI BIT RELATIVNI U ODNOSU NA SCENU

//!PROVJERI SLUCAJ S VERTIKLANIM ORPHANOM + SLUCAJ DI IMAMO 2 ORPHANA NA RUBU KOJI SE SPAJAJU U ISTOJ TOCKI, 1 VERTIKLANO, DRUGI HORIZONTALNO

//!PRVI PODACI SE PAMTE KOD POCETNOG POZICIONIRANJA TLOCRTA NA GPS KOORDINATAMA

//!RAZLIKA IZMEDU LOKALNIH I WORLD THREE.JS KOORDINATA

//!REDOSLIJED OBILASKA SOBE ODNOSNO REDOSLIJED U KOJEM SU SLOZENE coordsInside KOORDINATE JE UVIJEK U CCW SMJERU

//!S OVOM PRETHODNOM LOGIKOM BI SE MICALI ONI CVOROVI KOJI LEZE SKORO PA NA ISTOJ LINIJI(TOLERIRA SE ODSTUPANJE OD 3 STUPNJA) I KOJI SU DALJI(MALO CUDNO, LOGICNIJE BI BILO DA SE MICE BLIZI ŠA DA DAJEMO PREDNOST DUZOJ LINIJI)

//!SAMO ZA MOUSE EVENTOVE, NE ZA TOUCH

//!SAMO ZA mouse EVENTOVE

//!SPREMI KOORDINATE GORNJEG LIJEVOG KUTA BBOXA TLOCRTA NA KOJEG SE ODNOSE GPS KOORDINATE

//!SPREMI plan_general KOJI SADRZI KOORDINATE -> UNOS KOORDINATA JE U <ShowFloorplanOnMap/> I <InsertFloorplanGpsCoords/>

//!SVE METODE SU OBAVEZNE ZA PROSLIJEDIT

//!SVE OPERACIJA RACUNANJA RADIMO U METRIMA A UKOLIKO JE ODABRAN IMPERIAL SUSTAV ONDA SAMO PRILAGODAVAMO ISPIS KORISNIKU

//!SVE VRIJEDNOSTI MORAJU BITI CIJELI BROJEVI

//!SVI OBJEKTI KOJI SU DODANI NA SCENU IMAJU position ATRIBUT KOJI JE RELATIVAN U ODNOSU NA OBJEKT SCENE A BUDICI DA SE SVI ONI ROTIRAJU ZAJEDNO SA SCENOM RELATIVNE POZICIJE I DALJE OSTAJU ISTE

//!TEK NAKON ISPRAVNE TRANSLACIJE RADIMO ROTACIJU TLOCRTA OKO GORNJE LIJEVE TOCKE KAKO BI DOBILI ISTI REZULTAT KAO U <ShowFloorplanOnMap/> U KOJEM SE TAKODER UVIJEK RADI ROTACIJU U ODNOSU NA GORNJU LIJEVU TOCKU DEFAULT CANVASA BEZ ROTACIJE

//!TIME SMO ZAPRAVO DOBILI ROTACIJU FLOORPLANA OKO GORNJE LIJEVE TOCKE , TOCNO ONO STA TREBAMO

//!TOCKE ZIDA U roomInsideWalls NE MIJENJAMO OVISNO I INTERPOLACIJI, OSTAJU FIKSNE I SITE KAO KOD KREIRANJA

//!TRANSLACIJU CIJELOG TLOCRTA RADIMO JEDNOSTAVNO PREKO OBJEKTA SCENE KOJA JE Object3D I UJEDNO PARENT OD SVEGA ONOG STO JE ISCRTANO NA MAPI

//!U SUPROTNOME UZIMAMO TOP LEFT SVG KOORDINATE OD boxWallCoordinates

//!UKOLIKO NE MICEMO CVOROVE MEHANIZAM ODREDIVANJA SOBA BOLJE RADI -> ZAPINJE VECINOM KOD SLUCAJEVA KADA JE JEDAN ZID PODIJELJEN U 2 DIJELA IAKO NEMA POTREBE ZA TIM(NEMA SJECISTA S DRUGIM ZIDOVIMA)

//!VRIJEDNOST SE UVIJEK POHRANJUJE U m2 -> PRETVORI AKO JE POTREBNO

//!ZA DEFAULT PARAMETRE SE FUNKCIJE NECE POZVAT

//!ZA INPUT type="checkbox"

//!ZA ObjMtl POTREBNO PRILAGODIT KOD KAO STO JE I drawFloorplanWallObjMtlItems

//!ZA RAZLIKU IZMEDU WORLD I LOCAL KOORDINATA POGLEDAJ OPIS IZNAD DONJE METODE

//!ZATO SCENU TRANSLATIRAMO ZA minX/minY OFFSETE I TIME DOVODIMO TOP-LEFT TOCKU TLOCRTA SCENE U TU TOCKU NA MAPI ODNOSNO U WORLD ISHODISTE DEFINIRANO SA modelOrigin

//!coords NIZ U NEKIM SLUCAJEVIMA IMA VISE KOORDINATA OD coordsInside I coordsOutside NIZOVA I SADRZI KRIVE KOORDINATE

//!coords NIZ U NEKIM SLUCAJEVIMA IMA VISE KOORDINATA OD coordsInside I coordsOutside NIZOVA I SADRZI KRIVE KOORDINATE A ON SE VEZE NA way NIZ PA I ON BUDE KRIV

//!ne dozvoljavamo jednakost -> JEDINO U UVOM SLUCAJU SE PROSLIJEDUJE PARAMETAR wallEquationSlope
