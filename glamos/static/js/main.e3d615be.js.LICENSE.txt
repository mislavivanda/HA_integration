//!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!

//!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!

//!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!

//!!!!MANA OVE METODE!!!!!

//!!!!UZIMAMO U OBZIR PODATKE SAMO ZA PRIKAZANE POZICIJE!!!!

//!A WebGL context could not be created. Reason:  WebGL creation failed:  * tryANGLE (FEATURE_FAILURE_EGL_NO_CONFIG) * Exhausted GL driver options. (FEATURE_FAILURE_WEBGL_EXHAUSTED_DRIVERS)

//!AKO GOVORIMO O VEC SPREMLJENOM FLOORPLANU S KOORDINATAMA ONDA ZA TOP LEFT UZIMAMO SVG KOORDINATE ZADNJE SPREMLJENE GORNJE LIJEVE TOCKE FLOORPLANA JER SE NA NJU ODNOSE SPREMLJENE GPS KOORDINATE -> ZANIMAJU NAS NJIHOVE KOORDINATE U PIKSELIMA

//!AKO IMAMO VISE CVOROVA UNUTAR KRUGA TADA CE SE ZA SVAKI CVOR I ZIDOVE KOJI IDU IZ NJEGA ODRADITI POMICANJE KAKO TREBA ODNOSNO SA UZASTOPNIM POMICANJIMA CEMO DOBITI ONO STA ZELIMO

//!AKO JE POTREBNO ISCRTAVAT ONDA ISCRTAVAMO 2D HEATMAPU PRVO I TEK NAKON NJE SVE DRUGE TIPOVE HEATMAPE

//!AKO JE POTREBNO MICAT HM ONDA NIJE POTREBNO NISTA CEKAT, SAMO MICEMO SVE OBJEKTE

//!AKO NE POSTOJI this.heatmapGeneral.floorplanGeneral OD FLOORPLANA ONDA JE STARIJA VERZIJA I NEMAMO KOORDINATE TLOCRTA SPREMLJENE UNUTAR heatmapGeneral I Ne MOZEMO PRIKAZAT TLOCRT NA MAPI

//!BEARING NE TREBA POSTAVLJAT JER OSTAJE I DALJE NA MAPI NAKON resize ALI GA TREBA UKLJUCIT KOD IZRACUNA BBOX KOORDINATA(UKLJUCEN KROZ POZIV calculateMapCornersCoordinatesFromTopLeftPoint METODE)

//!BITAN REDOSLIJED ELEMENATA JER OVISIMO O NJEMU KOD RENDERA

//!BUDUCI DA JE OZNACEN KAO Transferable object NE MOZEMO NAKNADNO KORISTIT positionTemplateOffscreenCanvas NITI NJEGOV ORIGINAL positionTemplateCanvas KOJI CE OSTAT PRAZAN BEZ ICEG NACRTANOG

//!BUDUCI DA JE SVE VEC UCITANO PRI POCETNOM UCITAVANJU NEMA ASINKRONIH LOADER POZIVA PA NAKON OVE METODE ZNAMO DA JE FLOORPLAN ISCRTAN

//!DAKLE ISCRTAVAMO electricFieldCanvas -> floorplanRoomsClippingCanvas -> heatmapCanvas GLAVNI

//!DEBLJINU ZIDA ĆEMO UZET U OBZIR NA NACIN DA SVAKI PIKSEL ODNOSNO SVG JEDINICA OD ZIDA DAJE ODREDENI JEDINICNI GUBITAK KOJI DODATNO OVISI O MATERIJALU ZIDA

//!DODAJ NAKON STA SE PREPRAVI gridResolutionMeters

//!FORMAT -> DIMENZIJE ZIDA + INDEKS MATERIJALA ZIDA U GLAVNOM NIZU PREMA KOJEM CEMO ZNAT O KOJEM JE MATERIJALU RIJEC

//!GRUPA SE DODAJE U POCETKU NA POZICIJU 0 ODNSONO TAMO DI JE I ISHODISTE SCENE PA ONDA SVE CHILD ELEMENTE MOZEMO POSTALVJAT NA KOOORDINATE RELATIVNE U ODNOSU NA SCENU

//!INACE AKO IMA ONDA SE TU NALAZE ZADNJE AZURIRANE KOORDINATE PA IH PRIKAZUJEMO S NJIMA S TIM DA NE DOZVOLJAVAMO PROMJENE

//!ISCRTAJ IH NAKON STO SU ZIDOVI ISCRTANI

//!ISCRTAJ SAMO ONE POZICIJE KOJE POSTOJE I U PODACIMA JER JE NPR MOGUC SLUCAJ DA NEKE POZICIJE IMA U PLANU A NEMA U PODACIMA -> TRETIRAMO KAO DA NIJE OTISAO I TESTIRAO S TE POZICIJE

//!IZNIMKA SU DOUBLE ORPHAN ZIDOVI GDJE UVIJEK IREIRAMO circle_part PA IH KASNIJE OBRADUJEMO

//!In the context of a React application using Webpack however, there is a little difference in how we use Web Workers. If you happen to be using a version of Webpack earlier than version 5, you’ll need to install worker-loader -> OSIM TOGA NIJE NISTA DRUGO POTREBNO KONFIGURIRAT U craco.config.js*/

//!JEDNADZBA ZIDA JE PREDSTAVLJENA S OBJEKTOM KOJI JE JEDINSTVEN U ODNOSU NA SVE DRUGE PA STOGA MOZEMO JEDNADZBE ZIDOVA USPOREDIVATI PREMA REFERENCAMAOBJEKTA

//!JSON.stringify MICE DOM elemente ako postoje u propertiesima(NPR graph PROPERTY OD OBJ2D KLASE)

//!KAD SE POSTAVLJA bearing OD MAPE ONDA SE MAPA ROTIRA OKO SVOG CENTRA

//!KAT CE OSTAT PRIKAZAN, NE TREBA GA BRISAT NITI ISCRTAVAT

//!KONFIGURACIJSKE VARIJABLE IZ HOME ASSISTANTA ĆE BITI PROSLIJEDENE UNUTAR _env_ PROPERTIA OD window OBJEKTA

//!KOORDINATE RELATIVNE U ODNOSU NA GORNJI LIJEVI KUT MAPE

//!KOORDINATE RELATIVNE U ODNOSU NA GORNJI LIJEVI KUT MAPE -> GORNJA LIJEVA TOCKA IMA (0,0) KOORDINATE

//!KOORDINATE TREBAJU BITI RELATIVNE U ODNOSU NA POCETAK MAPE -> GORNJI LIJEVI VRH MAPE JE [0,0]

//!KOORDINATE ZA allPositionsObjData POSTAVLJAMO NA NOVE DEFINIRANE TESTING LOKACIJAMA

//!MI TRENUTNO NEMAMO NIJEDAN DRUGI NACIN IDENTIFIKACIJE NEKE OPCIJE OSIM INDEKSA PA STOGA NE MOZEMO ODREDIT JE LI PRETHODNA OPCIJA KOJA JE PRIJE BILA NA TOM INDEKSU RAZLICITA OD ONE TRENUTNE NA TOM INDEKSU

//!MI ZAPRAVO OVDE RADIMO POMICANJE TROKUTA U ODNOSU NA VRH SOBE KOJI SE NALAZI UNUTAR NJEGA ISTO KAO STO RADIMO SA KRUZNIM LUKOM -> ZATO I UZIMAMO TOCKU SJECISTA A NE CVOR SOBE

//!MI ZELIMO ISCRTAT SAMO DIJELOVE UNUTAR PROSOTORIJA A TO POSITZEMO NA NACIN DA ZA floorplanRoomsClippingCanvas DEFINIRAMO clip PATH KOJI CE SE ZA NJEGA PRIMJENJIVAT

//!MI ZELIMO KOD POSTAVLJANJA BEARINGA MAPE RADIT ROTACIJU OKO GORNJE LIJEVE TOCKE TLOCRTA PA ZATO PRIJE BEARINGA POSTAVLJAMO CENTAR NA TU TOCKU

//!MOGUC SLUCAJ U KOJEM SU OBE TOCKE PROSTORIJE UNUTAR KRUZNOG LUKA -> ORPHAN WALL KOJI JE CIJELI UNUTRA

//!MOGUCE DA JE NEKA TOCKA NA VISE ZIDOVA I ONDA IMA VISE JEDNADZBI PRAVACA -> MOZEMO SPUSTAT/POMJERAT NA VISE PRAVACA

//!MOGUCE POSLAT SAMO 1 offscreenCanvas U web-worker PRI CEMU ON MORA BITI JEDINI CLAN event.data OBJEKTA KOJI SE SALJE + MORA BIT OZNACEN KAO Transferable object CIME JA ZAKLJUCEN ZA KORISTENJE SAMO U web-workeru(https://developer.mozilla.org/en-US/docs/Web/API/Web_Workers_API/Transferable_objects)

//!MOGUĆE JE PARALELIZIRAT ODVOJENO POMICANJE PO X I Y ALI JE PROBLEM KOD PRIMANJA PODATAKA ODREDIT BRZI NAČIN ZA POHRANU SAMO ONIH ČLANOVA MATRICE IZNAD/ISPOD DIJAGONALE -> LAKŠE JE VRATIT CIJELO PODRUČJE KOJEM NE MORAMO POSEBNO POSTAVLJAT VRIJEDNOSTI

//!MORA BITI CIJELI BROJ

//!MOZE OTICI U undefined NA RUBOVIMA ALI TO NE DAJE GRESKU, TRETIRA SE KAO DA JE 0

//!NA IZLASKU IZ PETLJE TREBAMO SPOJIT ZADNJI stop SA PRVIM START CLANOM DA SE SPOJI POLIGON IZMEDU NJIH

//!NA TAJ NACIN CE NA floorplanRoomsClippingCanvas BIT ISCRTANI DIJELOVI SIMULACIJE SAMO UNUTAR PROSTORIJA I ONDA CEMO TAKAV floorplanRoomsClippingCanvas ISCRTAT NA KONACNI heatmapCanvas KOJI SE PRIKAZUJE KORISNIKU

//!NA TAJ NACIN SPRJECAVAMO OVERHEAD KREIRANJA NOVIH WORKERA OD STRANE

//!NA floorplanRoomsClippingCanvas DEFINIRAMO KOJI DIJELOVI OD FRAMEA ANIMACIJE CE SE ISCRTAT A KOJI NECE

//!NAKON BRISANJA CLANOVA IZ polygons NIZA MIJENJA SE INDEKSACIJA U polygons NIZU -> POTREBNO AZURIRAT INDEKSE U inside NIZU

//!NAKON STA SMO DOVELI FLOORPLAN U TOP-LEFT TOCKU TREBAMO GA ROTIRAT ZA bearing KAO I KOD <ShowFloorplanOnMap/> A TO RADIMO TAKO DA SCENU ROTIRAMO OKO NJENOG RELATIVNOG ISHODISTA (0,0,0) KOJE PREDSTAVLJA modelOrigin ODNOSNO TOP LEFT TOCKA NA MAPI

//!NAPOMENA: TRENUTNO SE TAJ DIO RADI NA NACIN DA SE TRANSLATIRA I ROTIRA CIJELI OBJEKT SCENE

//!NAS OVDE ZANIMAJU NAS SAMO ONI ORPHAN ZIDOVI KOJIMA SAMO 1 KRAJ "VISI" U ZRAKU

//!NE IZRACUNAVAJ NOVU JEDNADZBU NAKON ODMAH NAKON POMJERANJA JER NAS I KOD STOP SLUCAJA ZANIMA SJECISTE SA pointApointBEquation KOJA JE BILA NA POCETKU( U TEORIJI NE BI TREBALO BIT PROBLEMA JER I NAKON POMJERANJA NOVI PRAVAC IDE KROZ TOCKU KOJU NISMO POMJERILI ALI DODE DO AKUMULIRANJA GRESKE ZBOG NEPRECIZNOSTI PA isPointRayCrossingWallSpike ZNA NE DETEKIRAT SJECISTA KOJA TREBA

//!NE MICEMO GA AKO SMO U SIMULATE TESTING MODE JER BINDER PREDSTAVLJA LOKACIJU IZVORA -> AKO ODE U select_mode ONDA DONJI UVJET ZA ZOOMIRANJE SA simulateTestingCanvasZoomTranslateControl NECE BIT ZADOVOLJEN

//!NE MICEMO NIJEDAN CVOR ZIDA, OSTAVLJAMO IH SVE

//!NE MOZE RADIT SAVE AS IZ PRAZNOG FLOORPLANA

//!NE RADIMO JER NISMO UNUTAR GLAMOS APLIKACIJE

//!NE RADIMO ZA OVAJ SLUCAJ JER NISMO UNUTAR GLAMOS APLIKACIJE

//!NECE NIKAD BIT SITUACIJA SA removePadding=true I logoLabel=true JER KOD EXPORTANJA BEZ PADDINGA NEMA MJESTA ZA STAVLJANJE LOGA

//!NEOVISNO O TOME IMA LI KAT ODABRANU HM OPCIJU -> MOZE KASNIJE BIT ISCRTAN KAD SE ODABERE

//!NEĆE OTIĆ U < 0 ILI >= this.boxWallCoordinates.width/height JER SE OBE TOCKE NE SMIJU NALAZIT NA ZIDOVIMA NITI BITI IZVAN PROSTORINJA -> NECE BIT NA RUBOVIMA boxWallCoordinates

//!NIJE SE MOGUCE SPOJIT NA SOCKET -> ISPISI OBAVIJEST

//!NPR floorplanCenterVector CE SE I DALJE NALAZIT U SREDISTU TLOCRTA I NAKON ROTACIJE I TRANSLACIJE ALI CE IMAT DRUKCIJE world KOORDINATE NEGO NA POCETKU

//!OBJEKT HM KOJI SE ISCRTAVA NA MAPI JE ISTI ONAJ KOJI JE PRETHODNO ISCRTAN U 2D STA ZNACI DA VEC POSTOJI I SPREMLJEN JE U this.heatmapTypes KAO .object PROPERTY

//!OBJEKT SCENE JE RELATIVNA U ODNOSU NA world ISHODISTE I U POCETKU JE (0,0,0) KOORDINATA SCENE ISTA KAO I WORLD ISHODISTE ODNOSNO modelOrigin KOJE JE POSTAVLJENO SA modelOrigin NA KOORINDATE GORNJE LIJEVE TOCKE TLOCRTA

//!OGRANICENJE -> UKOLIKO ODVOJIMO SVAKI web-worker U ZASEBNI FILE I IDEMO IMPORTAT SVAKI ZASEBNO S OVOM SINTAKSOM webpack worker-loader IMA BUG I NE MOZE TO ODRADIT + JAVLJA WARNING https://github.com/webpack-contrib/terser-webpack-plugin/issues/276 A PONASANJE JE TAKVO DA JEDINO KREIRA ONAJ web-worker KOJI JE ZADNJI IMPORTANT

//!OSTAT CE SACUVAN visible STATUS

//!POGLEDAJ GORE OPIS!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!

//!POHRANJUJE SE UVIJEK U m2

//!POKRIVAMO MOGUCNOST DA JE FLOORPLAN OD HM IZBRISAN -> TADA HM POSTOJI KAKVA JE NEOVISNO O NJEMU ALI NE SMIJEMO PRIKAZIVAT MOGUCNOSTI MANIPULACIJE S KOORDINATAMA FLOORPLANA -> RJESAVA SE UNUTAR <ShowFloorplanOnMap/> KOMPONENTE

//!POSEBNO BITNO ZA HEATMAPU U KOJOJ ZBOG TOGA MOZEMO ZADRZAT KLASICNI NACIN ODREDIVANJA start/stop TOCAKA

//!POSTAVI DA GPS KOORDINATE NE POSTOJE JER NEMA TLOCRTA -> GENERAL PRAZAN

//!POSTAVI NOVE VRIJEDNOSTI KOORDINATA AKO SU PROMIJENJENE

//!POSTAVLJANJE LISTENERA PRIJE setZoom POZIVA

//!POTREBNO JE RADIT DUPLICIRANU OBRADU (i, v) I (v, i) ZIDOVA -> IAKO SE DOBIJU ISTE TOCKE BITNO JE KASNIJE ZA KREIRANJE SOBA -> U SUPROTNOM SE NECE NIJEDNA SOBA KREIRAT

//!POTREBNO ZA SVAKU HM OD SVAKOG KATA DODAT NEKU VRSTU ID-A

//!POZIVA SE SAMO ZA HEATMAPU

//!PRIJENOS RADIMO PREKO BUILT-IN METODE OD OFFSCREEN CANVASA transferToImageBitmap KOJU POIZIVAMO U WORKERU

//!PROBLEM S POZICIONIRANJEM HELPERA NAKON TRANSLACIJE I ROTACIJE SCENE

//!PROBLEM: HELPERI ZA SVIJETLA I KAMERU SE NE POZICIONIRAJU DOBRO NAKON TRANSLACIJE I ROTACIJE SCENE(KAD SE ISCRTAJU POZICIJE OD SVJETALA ONE BUDU NA PRAVOM MJESTU + ISTO JE OSVIJETLJENJE KAO NA NORMALNOM PRIKAZU BEZ MAPE STA DAJE POTVRDU DA SU SVIJETLA DOBRO TRANSLATIRANA I ROTIRANA ZAJEDNO SA SCENOM), CINI SE KO DA SE POZICIONIRAJU U ODNOSU NA world ISHODISTE(KOJE JE ISTO KAO OD SCENE U POCETKU PA SU STOGA U POCETKU DOBRO POSTAVLJENI) IAKO SU DODANI SA scene.add() PA BI TREBALI BIT RELATIVNI U ODNOSU NA SCENU

//!PROVJERI SLUCAJ S VERTIKLANIM ORPHANOM + SLUCAJ DI IMAMO 2 ORPHANA NA RUBU KOJI SE SPAJAJU U ISTOJ TOCKI, 1 VERTIKLANO, DRUGI HORIZONTALNO

//!PRVI PODACI SE PAMTE KOD POCETNOG POZICIONIRANJA TLOCRTA NA GPS KOORDINATAMA

//!Poligon je minimalno trokut pa stoga imamo sigurno barem 3 tocke u polygon nizu

//!Promise.all NE IZVODI SEKVENCIJALNO PA STOGA MORAMO SAMI DEFINIRAT TAJ MEHANIZAM

//!RAZLIKA IZMEDU LOKALNIH I WORLD THREE.JS KOORDINATA

//!REDOSLIJED OBILASKA SOBE ODNOSNO REDOSLIJED U KOJEM SU SLOZENE coordsInside KOORDINATE JE UVIJEK U CCW SMJERU

//!S OVOM PRETHODNOM LOGIKOM BI SE MICALI ONI CVOROVI KOJI LEZE SKORO PA NA ISTOJ LINIJI(TOLERIRA SE ODSTUPANJE OD 3 STUPNJA) I KOJI SU DALJI(MALO CUDNO, LOGICNIJE BI BILO DA SE MICE BLIZI ŠA DA DAJEMO PREDNOST DUZOJ LINIJI)

//!SIGURNO POSTOJI

//!SPREMI KOORDINATE GORNJEG LIJEVOG KUTA BBOXA TLOCRTA NA KOJEG SE ODNOSE GPS KOORDINATE

//!SPREMI plan_general KOJI SADRZI KOORDINATE -> UNOS KOORDINATA JE U <ShowFloorplanOnMap/> I <InsertFloorplanGpsCoords/>

//!SPRIJECAVANJE DUPLICIRANIH POZIVA generateHeatmapKOD POZIVA OVE METODE

//!STROGA NEJEDNAKOST TAKO DA NE OBRADUJEMO TOCKE NA KOJE SMO VEC POMAKNUTI ODNOSNO KADA JE CVOR ZIDA JEDNAK start/stop TOCKI OD KRUZNOG LUKA

//!SVAKI BROWSER IMA LIMIT PO BROJU WEBWORKERA KOJI SE MOGU ISTOVREMENO KREIRATI ODNOSNO IZVODITI STOGA NE MOZEMO SAMO KREIRATI WEB WORKERE KOLIKO NAM TREBA

//!SVE HM OVISE O 2D HEATMAPI KOJA SE UJEDNO I ISCRTAVA ASINKRONO

//!SVE OPERACIJA RACUNANJA RADIMO U METRIMA A UKOLIKO JE ODABRAN IMPERIAL SUSTAV ONDA SAMO PRILAGODAVAMO ISPIS KORISNIKU

//!SVE STO JE ISPOD minSignalPowerdBmLevel PROGLASAVAMO DA NEMA SIGNALA(BIJELA BOJA PRILIKOM ODREDIVANJA BOJE U PALETI)

//!SVE VRIJEDNOSTI MORAJU BITI CIJELI BROJEVI

//!SVE start ILI stop UNUTAR SVOG wallEquation CE SADRZAVATI NEKE OD JEDNADZBI OVIH ZIDOVA

//!SVI OBJEKTI KOJI SU DODANI NA SCENU IMAJU position ATRIBUT KOJI JE RELATIVAN U ODNOSU NA OBJEKT SCENE A BUDICI DA SE SVI ONI ROTIRAJU ZAJEDNO SA SCENOM RELATIVNE POZICIJE I DALJE OSTAJU ISTE

//!SVI positionRoomDoubleOrphanWalls ZIDOVI SU JEDINSTVENI ODNOSNO NEMA DUPLICIRANIH ZIDOVA PA JE JEDNADZBA PRAVCA OD SVAKOG ZIDA JEDINSTVENA U ODNOSU NA DRUGE

//!TEK NAKON ISPRAVNE TRANSLACIJE RADIMO ROTACIJU TLOCRTA OKO GORNJE LIJEVE TOCKE KAKO BI DOBILI ISTI REZULTAT KAO U <ShowFloorplanOnMap/> U KOJEM SE TAKODER UVIJEK RADI ROTACIJU U ODNOSU NA GORNJU LIJEVU TOCKU DEFAULT CANVASA BEZ ROTACIJE

//!TIME SMO ZAPRAVO DOBILI ROTACIJU FLOORPLANA OKO GORNJE LIJEVE TOCKE , TOCNO ONO STA TREBAMO

//!TOCKE ZIDA U roomInsideWalls NE MIJENJAMO OVISNO I INTERPOLACIJI, OSTAJU FIKSNE I SITE KAO KOD KREIRANJA

//!TRANSLACIJU CIJELOG TLOCRTA RADIMO JEDNOSTAVNO PREKO OBJEKTA SCENE KOJA JE Object3D I UJEDNO PARENT OD SVEGA ONOG STO JE ISCRTANO NA MAPI

//!TREBALI BI IMATI SAMO SLUCAJEVE KADA SE ILI OBE NE SIJEKU ILI SE OBE SIJEKU NAKON POMAKA, NE BI TREBALO BIT POLOVICNIH SLUCAJEVA

//!TRENUTNA LOGIKA NE RADI ZA ORPHAN ZIDOVE KOJI SU UNUTAR KRUGA  JER NE PRONALAZI SJECISTE ZRAKE S NIJEDNIM OD ZIDOVA, PROMIJENI LOGIKU TAKO DA I NJIH ZADOVOLJIMO?

//!TRENUTNA LOGIKA NE RADI ZA ORPHAN ZIDOVE KOJI SU UNUTAR KRUGA JER NE PRONALAZI SJECISTE ZRAKE S NIJEDNIM OD ZIDOVA, PROMIJENI LOGIKU TAKO DA I NJIH ZADOVOLJIMO?

//!U SUPROTNOME UZIMAMO TOP LEFT SVG KOORDINATE OD boxWallCoordinates

//!U WORKERU RADIMO OGRANICAVANJE S OBZIROM NA GORNJU GRANICU -> MAX VRIJEDNOST SNAGE MOZE BITI maxSignalPowerdBmLevel

//!UKOLIKO NE MICEMO CVOROVE MEHANIZAM ODREDIVANJA SOBA BOLJE RADI -> ZAPINJE VECINOM KOD SLUCAJEVA KADA JE JEDAN ZID PODIJELJEN U 2 DIJELA IAKO NEMA POTREBE ZA TIM(NEMA SJECISTA S DRUGIM ZIDOVIMA)

//!VRIJEDNOST SE UVIJEK POHRANJUJE U m2 -> PRETVORI AKO JE POTREBNO

//!ZA DEFAULT PARAMETRE SE FUNKCIJE NECE POZVAT

//!ZA HEATMAPU JEDINI ASINKRONI POZIV JE KOD UCITAVANJA SLIKE 2D HEATMAPE A BUDUCI DA SE ONA ISCRTAVA ODMA NA POCETKU NJU IMAMO SPREMLJENU

//!ZA INPUT type="checkbox"

//!ZA ObjMtl POTREBNO PRILAGODIT KOD KAO STO JE I drawFloorplanWallObjMtlItems

//!ZA RAZLIKU IZMEDU WORLD I LOCAL KOORDINATA POGLEDAJ OPIS IZNAD DONJE METODE

//!ZA SVAKI POZIV loadHeatmap POSTAVLJENA JE loading KOMPONENTA I UVIJEK JE POTREBNO UNMOUNTATI NAKON ZAVRSETKA OPERACIJA

//!ZASAD ISCRTAVANJE SAMO ZA FLOORPLAN KOD KOJEG NIJE POTREBNO PROVJERAVAT POSTOJI LI ODABRANA HM OPCIJA ZA KAT

//!ZASAD ZA GRID RESOLTION UZIMAMO pointsPerWaveLength ZA VALMNU DULJINU U VACUUMU

//!ZATO IMAMO SAMO 1 WORKER CIJA LOGIKA ODNOSNO KOD KOJI ON IZVODI SE PRILAGODAVA OVISNO O PROSLIEJDENIM PARAMETRIMA

//!ZATO JE POTREBNO PRENIJETI PODATKE IZ web-workera KADA ZAVRSI I ISCRTAT IH NA alphaCanvas

//!ZATO RADIMO LOGIKU Thread poola KOJI SADRZI NAJVISE threadPoolMaxWebWorkersNum WEB WORKERA I KADA POJEDINI WORKER ZAVRSI KREIRA SE NOVI, BROJ WORKERA ODREDIMO OVISNO O BROJU COREOVA PROCESORA JER CE NA TAJ NACIN IZVRSAVANJE BIT OPTIMALNO, NECE BIT CEKANJA

//!ZATO SCENU TRANSLATIRAMO ZA minX/minY OFFSETE I TIME DOVODIMO TOP-LEFT TOCKU TLOCRTA SCENE U TU TOCKU NA MAPI ODNOSNO U WORLD ISHODISTE DEFINIRANO SA modelOrigin

//!ZBOG TOGA POSTAVLJAMO I DODATNI UVJET UZ PROVJERE KOORDINATA DA TOCKA NE SMIJE IMAT angle PROPERTY JER ON POSTOJI SAMO ZA UBACENE TOCKE CVOROVA SOBE UNUTAR POLIGONA A NE ZA start,stop I SREDISTE KRUGA

//!ZNAMO DA JE AKTIVAN NEKI OD OVA 2 GRAFA JER JE SAMO U TOM SLUCAJU PRIKAZANA I OMOGUCENA OVA OPCIJA

//!coords NIZ U NEKIM SLUCAJEVIMA IMA VISE KOORDINATA OD coordsInside I coordsOutside NIZOVA I SADRZI KRIVE KOORDINATE

//!coords NIZ U NEKIM SLUCAJEVIMA IMA VISE KOORDINATA OD coordsInside I coordsOutside NIZOVA I SADRZI KRIVE KOORDINATE A ON SE VEZE NA way NIZ PA I ON BUDE KRIV

//!drawPositionToAlphaCanvas NE KORISTI heatmapGeometry PA JE NEOVISAN O calculatePositionGeometry METODI I MOGU SE POZIVAT PARALELNO

//!ne dozvoljavamo jednakost -> JEDINO U UVOM SLUCAJU SE PROSLIJEDUJE PARAMETAR wallEquationSlope

//!parseValue=true -> FORMAT KOJI SE PRIMA UDALJENOST U KILOMETRIMA ZAJEDNO SA km STRINGOM

//!pocetni radijus bez skaliranja -> MORA BITI CIJELI BROJ

//!this UNUTAR onmessage HANDLERA SE ODNOSI NA KONTEKST WEB WORKERA -> ZATO GA PROSLIJEDUJEMO KAO PARAMETAR
